import{r as p,j as e}from"./index-WZ944UgW.js";import{s as I,a as A,p as C,b as E,c as P,d as D,e as F,f as O,g as U}from"./streetInterviewPrompts-Dzu83YwK.js";const W="promptWorkflows",g="activePromptWorkflowId",v={analyzeProduct:"You MUST meticulously analyze the product image. Identify the product's type, color, shape, branding, key features, and likely use case from its image.",analyzeCharacter:"You MUST meticulously analyze the reviewer/character image. Identify the person's appearance, clothing style, gender, and general vibe from their image. If no reviewer image is provided, you must invent a suitable character that fits the product and theme.",analyzeEnvironment:"You have a set of pre-approved environment images for this photoshoot. You MUST write your image prompts to describe scenes taking place in these specific locations. Reference them conceptually (e.g., 'The reviewer stands on the city crosswalk,' 'A close-up of the product on the cafe table in front of the brick wall.').",script:U,storyboard:O,enrich:F,supplementsScript:D,supplementsStoryboard:P,podcastScript:E,podcastAnalysis:C,streetInterviewScript:A,streetInterviewStoryboard:I},y={id:"default-workflow-v1",name:"Default System Workflow",isDefault:!0,prompts:v},w=()=>{try{const t=localStorage.getItem(W);return(t?JSON.parse(t):[]).map(a=>({...a,prompts:{...v,...a.prompts}}))}catch(t){return console.error("Failed to parse workflows from localStorage",t),[]}},N=t=>{try{localStorage.setItem(W,JSON.stringify(t))}catch(o){console.error("Failed to write workflows to localStorage",o)}},d={getWorkflows(){const t=w();return[y,...t]},saveWorkflow(t){const o=w(),a=o.findIndex(n=>n.id===t.id);if(a>-1)o[a]={...o[a],...t,id:o[a].id};else{const n={...t,id:t.id||crypto.randomUUID()};o.push(n)}N(o)},deleteWorkflow(t){if(t===y.id){console.error("Cannot delete the default workflow.");return}let o=w();o=o.filter(a=>a.id!==t),N(o),this.getActiveWorkflowId()===t&&localStorage.removeItem(g)},getActiveWorkflowId(){return localStorage.getItem(g)},setActiveWorkflowId(t){t?localStorage.setItem(g,t):localStorage.removeItem(g)},getActiveWorkflow(){const t=this.getActiveWorkflowId(),n=this.getWorkflows().find(l=>l.id===t)||y;return{...n,prompts:{...v,...n.prompts}}}},G=({workflow:t,onClose:o,onSave:a})=>{const[n,l]=p.useState(t.name),[u,h]=p.useState(t.prompts),m=()=>{if(!n.trim()){alert("Workflow name cannot be empty.");return}a({id:t.id,name:n,prompts:u})},i=(s,c)=>{h(b=>({...b,[s]:c}))},x=[{key:"analyzeProduct",label:"Product Analysis Prompt",description:"Guides the AI on how to interpret the main product image.",rows:4,section:"Analysis"},{key:"analyzeCharacter",label:"Character Analysis Prompt",description:"Guides the AI on how to interpret the model/reviewer image.",rows:4,section:"Analysis"},{key:"analyzeEnvironment",label:"Environment Analysis Prompt",description:"Guides the AI on how to interpret background/location images.",rows:4,section:"Analysis"},{key:"script",label:"Script Generation Prompt",description:"Used to generate the initial voiceover script.",rows:8,section:"Generation"},{key:"storyboard",label:"Storyboard Generation Prompt",description:"Used to convert the script into scene-by-scene visual and motion prompts.",rows:8,section:"Generation"},{key:"enrich",label:"Scene Enrichment Prompt",description:"Used by the 'Enrich Scene' feature to expand one scene into two.",rows:8,section:"Generation"}];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",onClick:o,children:e.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl border border-gray-700 shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:s=>s.stopPropagation(),children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-1",children:t.id?"Edit Workflow":"Create New Workflow"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Change the name and how the AI operates at each step."}),e.jsxs("div",{className:"flex-grow overflow-y-auto pr-4 -mr-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"workflow-name",className:"block text-lg font-bold text-blue-400 mb-2",children:"Workflow Name"}),e.jsx("input",{id:"workflow-name",type:"text",value:n,onChange:s=>l(s.target.value),placeholder:"e.g., Aggressive Marketing Style",className:"w-full bg-gray-900 border-2 border-gray-600 rounded-lg p-3 text-gray-200 focus:ring-2 focus:ring-blue-500 transition"})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-300 mb-4",children:"Analysis Prompts"}),x.filter(s=>s.section==="Analysis").map(s=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-bold text-blue-400 mb-1",children:s.label}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:s.description}),e.jsx("textarea",{value:u[s.key],onChange:c=>i(s.key,c.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md p-3 text-gray-200 text-sm font-mono focus:ring-2 focus:ring-blue-500 transition",rows:s.rows,placeholder:"Leave blank to use the hidden system default..."})]},s.key))]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-300 mb-4",children:"Generation Prompts"}),x.filter(s=>s.section==="Generation").map(s=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-bold text-blue-400 mb-1",children:s.label}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:s.description}),e.jsx("textarea",{value:u[s.key],onChange:c=>i(s.key,c.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md p-3 text-gray-200 text-sm font-mono focus:ring-2 focus:ring-blue-500 transition",rows:s.rows})]},s.key))]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6 pt-6 border-t border-gray-700",children:[e.jsx("button",{onClick:o,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-6 rounded-full transition-colors",children:"Cancel"}),e.jsx("button",{onClick:m,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-full transition-colors",children:"Save Changes"})]})]})})},_=({currentUser:t,onLogout:o})=>{var j;const[a,n]=p.useState([]),[l,u]=p.useState(null),[h,m]=p.useState(null),i=()=>{n(d.getWorkflows()),u(d.getActiveWorkflowId())};p.useEffect(()=>{i()},[]);const x=r=>{d.saveWorkflow(r),i(),m(null)},s=r=>{window.confirm("Are you sure you want to delete this workflow? This cannot be undone.")&&(d.deleteWorkflow(r),i())},c=r=>{const S=r===(l??k)?null:r;d.setActiveWorkflowId(S),i()},b=()=>{const r=d.getActiveWorkflow();m({name:"",prompts:r.prompts})},k=((j=d.getWorkflows().find(r=>r.isDefault))==null?void 0:j.id)||"";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("header",{className:"py-4 px-8 bg-gray-800 shadow-md border-b border-gray-700 shrink-0 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-blue-400",children:[e.jsx("i",{className:"fas fa-sitemap mr-3"}),"Workflow Management"]}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Create, manage, and activate different AI instruction sets."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:b,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-plus"})," Create New Workflow"]}),e.jsx("button",{onClick:o,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full",children:"Logout"})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto space-y-4",children:a.map(r=>{const f=(l??k)===r.id;return e.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${f?"bg-blue-900/50 border-blue-600":"bg-gray-800 border-gray-700"}`,children:e.jsxs("div",{className:"flex justify-between items-center gap-4",children:[e.jsx("div",{className:"flex-grow",children:e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-3",children:[r.name,r.isDefault&&e.jsx("span",{className:"text-xs bg-gray-600 text-gray-300 font-semibold px-2 py-0.5 rounded-full",children:"Default"}),f&&e.jsx("span",{className:"text-xs bg-blue-500 text-white font-semibold px-2 py-0.5 rounded-full",children:"Active"})]})}),e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[e.jsx("button",{onClick:()=>c(r.id),disabled:r.isDefault&&!l,className:`font-semibold py-2 px-4 rounded-full text-sm transition-colors ${f?"bg-blue-600 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-200"} disabled:opacity-50 disabled:cursor-not-allowed`,children:f?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check-circle mr-2"}),"Activated"]}):"Activate"}),e.jsx("button",{onClick:()=>m(r),className:"bg-gray-600 hover:bg-gray-500 text-gray-200 font-bold w-10 h-10 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"fas fa-pen"})}),!r.isDefault&&e.jsx("button",{onClick:()=>s(r.id),className:"bg-red-800 hover:bg-red-700 text-white font-bold w-10 h-10 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"fas fa-trash"})})]})]})},r.id)})})})]}),h&&e.jsx(G,{workflow:h,onClose:()=>m(null),onSave:x})]})};export{_ as default};
