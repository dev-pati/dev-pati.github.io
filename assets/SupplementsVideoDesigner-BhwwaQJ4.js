import{j as o,r as i}from"./index-CRGght61.js";import{u as k,U as E,c as ia,r as L,g as la,a as da,b as ca,t as be,s as ma,O as ga,e as ua,d as pa,S as fa}from"./telegramService-wrTyrj_M.js";import{I as X}from"./ImageUpload-DM7okLVI.js";import{d as ha,g as va,e as ba,f as xa,c as Sa,m as xe,I as Ia}from"./lehuyducanhService-BuhKn-w0.js";import{r as j,i as ya,f as z,d as K}from"./media-CDZXYBSY.js";import{s as Se}from"./settingsService-CbIZ9NBp.js";import"./streetInterviewPrompts-Dzu83YwK.js";const ja=["Benefit Showcase","User Testimonial","Scientific Explainer","How It Works","Lifestyle Integration"],wa=[{value:"Kore",label:"Kore (Female)"},{value:"Puck",label:"Puck (Male)"},{value:"Charon",label:"Charon (Male)"},{value:"Fenrir",label:"Fenrir (Male)"},{value:"Zephyr",label:"Zephyr (Male)"}],Va=b=>{const{productInfo:U,setProductInfo:S,coreIdea:D,setCoreIdea:y,onGenerateRandomIdea:T,isGeneratingRandomIdea:O,videoFormat:M,setVideoFormat:w,onGenerateScript:R,isGeneratingScript:d,productImage:l,setProductImage:W,modelImage:u,setModelImage:N,environmentImage:B,setEnvironmentImage:V,ttsVoice:$,setTtsVoice:C,videoAspectRatio:F,setVideoAspectRatio:A}=b;return o.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl border border-gray-700 shadow-lg flex flex-col gap-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-blue-400 -mb-2",children:[o.jsx("i",{className:"fas fa-pills mr-2"}),"Core Inputs"]}),o.jsx(X,{id:"supplements-product-image",label:"Product Image (Required)",file:l,onFileChange:W}),o.jsx(X,{id:"supplements-model-image",label:"Model/Character Image (Optional)",file:u,onFileChange:N}),o.jsx(X,{id:"supplements-environment-image",label:"Environment Image (Optional)",file:B,onFileChange:V}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"product-info",className:"block text-md font-bold text-blue-400 mb-2",children:[o.jsx("i",{className:"fas fa-file-alt mr-2"}),"Product Info & Key Benefits"]}),o.jsx("textarea",{id:"product-info",value:U,onChange:m=>S(m.target.value),placeholder:"e.g., Helps improve focus and memory. Contains Ginkgo Biloba and B12. Vegan friendly.",className:"w-full bg-gray-700 border-2 border-gray-600 rounded-lg p-3 text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",rows:4})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("label",{htmlFor:"core-idea",className:"block text-md font-bold text-blue-400",children:[o.jsx("i",{className:"fas fa-lightbulb mr-2"}),"Core Idea"]}),o.jsx("button",{onClick:T,disabled:O||!l||!U,className:"text-xs font-semibold text-purple-400 hover:text-purple-300 disabled:text-gray-500 disabled:cursor-not-allowed transition-colors flex items-center gap-1",title:!l||!U?"Please provide Product Image & Info first":"Generate a random creative idea",children:O?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fas fa-spinner fa-spin"}),"Generating..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fas fa-dice"}),"Random Idea"]})})]}),o.jsx("textarea",{id:"core-idea",value:D,onChange:m=>y(m.target.value),placeholder:"Describe the main concept of your video, or click 'Random Idea' to generate one.",className:"w-full bg-gray-700 border-2 border-gray-600 rounded-lg p-3 text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",rows:3})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"video-format",className:"block text-md font-bold text-blue-400 mb-2",children:[o.jsx("i",{className:"fas fa-film mr-2"}),"Video Format"]}),o.jsx("select",{id:"video-format",value:M,onChange:m=>w(m.target.value),className:"w-full bg-gray-700 border-2 border-gray-600 rounded-lg p-3 text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",children:ja.map(m=>o.jsx("option",{value:m,children:m},m))})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"aspect-ratio-supplements",className:"block text-md font-bold text-blue-400 mb-2",children:[o.jsx("i",{className:"fas fa-ruler-combined mr-2"}),"Video Aspect Ratio"]}),o.jsxs("select",{id:"aspect-ratio-supplements",value:F,onChange:m=>A(m.target.value),className:"w-full bg-gray-700 border-2 border-gray-600 rounded-lg p-3 text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",children:[o.jsx("option",{value:"9:16",children:"9:16 (Portrait)"}),o.jsx("option",{value:"16:9",children:"16:9 (Landscape)"})]})]}),o.jsx("div",{className:"border-t-2 border-gray-700 -mx-6"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h3",{className:"text-lg font-bold text-blue-400 mb-2",children:[o.jsx("i",{className:"fas fa-volume-up mr-2"}),"Audio Settings"]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"supplements-tts-voice",className:"block text-md font-bold text-blue-400 mb-2",children:"Voiceover Model"}),o.jsx("select",{id:"supplements-tts-voice",value:$,onChange:m=>C(m.target.value),className:"w-full bg-gray-700 border-2 border-gray-600 rounded-lg p-3 text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",children:wa.map(m=>o.jsx("option",{value:m.value,children:m.label},m.value))})]})]}),o.jsx("div",{className:"border-t-2 border-gray-700 -mx-6"}),o.jsx("button",{onClick:R,disabled:d||!l,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-full disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 flex items-center justify-center gap-2 text-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5",title:l?"Generate Voiceover Script":"Please upload a product image first",children:d?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fas fa-spinner fa-spin"}),"Generating Script..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fas fa-wand-magic-sparkles"}),"Generate Voiceover Script"]})})]})},Ta=({currentUser:b,onLogout:U})=>{const[S,D]=i.useState(""),[y,T]=i.useState(""),[O,M]=i.useState(!1),[w,R]=i.useState("Benefit Showcase"),[d,l]=i.useState([]),[W,u]=i.useState(null),[N,B]=i.useState("Kore"),[V,$]=i.useState("9:16"),[C,F]=i.useState("input"),[A,m]=i.useState(""),[ee,ae]=i.useState(!1),[Ie,te]=i.useState(!1),[p,oe]=i.useState(null),[h,ne]=i.useState(null),[I,re]=i.useState(null),[G,se]=i.useState({}),[ie,le]=i.useState(null),[ye,je]=i.useState(!1),[we,de]=i.useState(!1),[Ve,ce]=i.useState(!1),[Ge,Pe]=i.useState(!1),[Ne,me]=i.useState(!1),[Ce,Ga]=i.useState(!1),[Ae,Pa]=i.useState(!1),[ge,ue]=i.useState(!1),[Z,pe]=i.useState(!1),[ke,fe]=i.useState(!1),[Fe,he]=i.useState(!1),[H,Ee]=i.useState({storyboard:0,image:0,video:0}),P=i.useCallback(()=>{if(b){const a=k.getUsage(b);Ee({storyboard:a.generateStoryboard.count,image:a.generateImage.count,video:a.generateVideo.count})}},[b]);i.useEffect(()=>{P()},[b,P]);const Ue=i.useCallback(async()=>{if(!p||!S){u("Please provide a Product Image and Product Info to generate an idea.");return}M(!0),u(null);try{const a=await j(p),t=await ha(S,a);T(t)}catch(a){u(a instanceof Error?a.message:"An unknown error occurred.")}finally{M(!1)}},[p,S]),Te=i.useCallback(async(a,t)=>{const n=d.find(e=>e.id===a);if(n){l(e=>e.map(r=>r.id===a?{...r,[t==="image"?"isGeneratingImagePrompt":"isGeneratingVideoPrompt"]:!0}:r));try{const e=`
        Video Format: ${w}
        Core Idea: ${y}
        Product Info: ${S}
      `,r=p?await j(p):void 0,s=h?await j(h):void 0,c=await va(e,n,t,r,s);l(g=>g.map(f=>f.id===a?{...f,[t==="image"?"imagePrompt":"videoPrompt"]:c,[t==="image"?"isGeneratingImagePrompt":"isGeneratingVideoPrompt"]:!1}:f))}catch(e){const r=e instanceof Error?e.message:"Failed to generate prompt.";alert(r),l(s=>s.map(c=>c.id===a?{...c,[t==="image"?"isGeneratingImagePrompt":"isGeneratingVideoPrompt"]:!1}:c))}}},[d,w,y,S,p,h]),De=i.useCallback(async()=>{if(!k.canPerformAction(b,"generateStoryboard")){const a=`You have reached your daily limit of ${E.generateStoryboard} storyboard generations.`;u(a),alert(a);return}if(!p){u("Please provide a Product Image to begin.");return}ae(!0),u(null),l([]),m(""),F("input");try{const a=await j(p),t=h?await j(h):void 0,n=I?await j(I):void 0,e=await ba(S,y,w,a,t,n);m(e),F("script_generated"),k.logAction(b,"generateStoryboard"),P()}catch(a){u(a instanceof Error?a.message:"An unknown error occurred.")}finally{ae(!1)}},[S,y,w,p,h,I,b,P]),Oe=i.useCallback(async()=>{te(!0),u(null);try{const a=await j(p),t=h?await j(h):void 0,n=I?await j(I):void 0,e=await xa(A,S,y,w,a,t,n);l(e),F("prompts_generated")}catch(a){u(a instanceof Error?a.message:"An unknown error occurred.")}finally{te(!1)}},[A,S,y,w,p,h,I]),Me=(a,t)=>l(n=>n.map(e=>e.id===a?{...e,imagePrompt:t}:e)),Re=(a,t)=>l(n=>n.map(e=>e.id===a?{...e,videoPrompt:t}:e)),Be=(a,t)=>l(n=>n.map(e=>e.id===a?{...e,voiceoverGuide:t}:e)),$e=(a,t,n)=>l(e=>e.map(r=>r.id===a?{...r,[t]:n}:r)),_e=(a,t)=>l(n=>n.map(e=>e.id!==a?e:{...e,images:e.images.filter(r=>r!==t),selectedImageForVideo:e.selectedImageForVideo===t?void 0:e.selectedImageForVideo})),Le=(a,t)=>l(n=>n.map(e=>e.id===a?{...e,selectedImageForVideo:t,videos:[],videoGenerationError:null}:e)),ze=a=>l(t=>t.map(n=>n.id===a?{...n,shouldUpscaleVideo:!n.shouldUpscaleVideo}:n)),Ke=(a,t)=>{l(n=>n.map(e=>e.id===a?{...e,includeDialogueInPrompt:t}:e))},We=a=>{const t=xe({voiceoverScript:"New scene",voiceoverGuide:"Neutral tone",imagePrompt:"",videoPrompt:""});l(n=>{const e=[...n];return e.splice(a,0,t),e})},Ze=(a,t,n)=>{se(e=>{const s={...e[a]||{},[t]:n};if(t==="subjects"&&(!n||n.length===0)?delete s.subjects:t==="imageProvider"&&n==="lehuyducanh"&&delete s.imageProvider,Object.keys(s).length===0){const{[a]:c,...g}=e;return g}return{...e,[a]:s}})},Y=i.useCallback(async a=>{const t=d.find(n=>n.id===a);if(t){l(n=>n.map(e=>e.id===a?{...e,isGeneratingAudio:!0,audioGenerationError:null}:e));try{const n=await Sa(t.voiceoverScript,t.voiceoverGuide,N),e=ia(n),r=URL.createObjectURL(e);l(s=>s.map(c=>c.id===a?{...c,audioUrl:r,isGeneratingAudio:!1}:c))}catch(n){const e=n instanceof Error?n.message:"An unknown audio generation error occurred.";l(r=>r.map(s=>s.id===a?{...s,isGeneratingAudio:!1,audioGenerationError:e}:s))}}},[d,N]),He=i.useCallback(async()=>{const a=d.filter(n=>!n.audioUrl);if(a.length===0){alert("All scenes already have generated audio.");return}de(!0);const t=a.map(n=>()=>Y(n.id));await L(t,5),de(!1)},[d,Y]),J=i.useCallback(async a=>{var n;if(!k.canPerformAction(b,"generateImage")){const e=`You have reached your daily limit of ${E.generateImage} image generations.`;throw l(r=>r.map(s=>s.id===a?{...s,isGeneratingImage:!1,imageGenerationError:e}:s)),new Error(e)}const t=d.find(e=>e.id===a);if(t){l(e=>e.map(r=>r.id===a?{...r,isGeneratingImage:!0,imageGenerationError:null}:r));try{const r=(G[a]||{}).imageProvider||"lehuyducanh",s=[];p&&s.push(p),h&&s.push(h),(n=G[a])!=null&&n.subjects&&s.push(...G[a].subjects);const c=await Promise.all(s.map(v=>j(v))),g=I?await j(I):void 0,f=await la({provider:r,prompt:t.imagePrompt,subjectUrls:c,sceneUrl:g,aspectRatio:V});l(v=>v.map(x=>x.id===a?{...x,images:[...x.images,...f],isGeneratingImage:!1}:x)),k.logAction(b,"generateImage"),P()}catch(e){throw e instanceof Error&&e.message.includes("daily limit")||l(r=>r.map(s=>s.id===a?{...s,isGeneratingImage:!1,imageGenerationError:e instanceof Error?e.message:"Unknown error"}:s)),e}}},[d,p,h,I,G,b,P,V]),Ye=i.useCallback(async(a,t)=>{try{const n=await j(t);l(e=>e.map(r=>r.id===a?{...r,images:[...r.images,n],selectedImageForVideo:n,videos:[],videoGenerationError:null}:r))}catch{u("Failed to process the uploaded image.")}},[]),q=i.useCallback(async(a,t)=>{const n=d.find(r=>r.id===a),e=n==null?void 0:n.videos[t];if(!e){console.error("handleUpscaleVideo could not find the video in state:",a,t);return}l(r=>r.map(s=>s.id===a?{...s,videos:s.videos.map((c,g)=>g===t?{...c,isUpscaling:!0,upscaleError:null}:c)}:s));try{const r=await da({provider:"lehuyducanh",mediaGenerationId:e.mediaGenerationId,seed:e.seed});l(s=>s.map(c=>c.id===a?{...c,videos:c.videos.map((g,f)=>f===t?{...g,upscaledUrl:r,isUpscaling:!1}:g)}:c))}catch(r){const s=r instanceof Error?r.message:"An unknown error occurred during upscale.";throw l(c=>c.map(g=>g.id===a?{...g,videos:g.videos.map((f,v)=>v===t?{...f,isUpscaling:!1,upscaleError:s}:f)}:g)),r}},[d]),Je=(a,t)=>{l(n=>n.map(e=>{if(e.id!==a)return e;const r=[...e.videos];return r.splice(t,1),{...e,videos:r}}))},Q=i.useCallback(async a=>{if(!k.canPerformAction(b,"generateVideo")){const n=`You have reached your daily limit of ${E.generateVideo} video generations.`;throw l(e=>e.map(r=>r.id===a?{...r,isGeneratingVideo:!1,videoGenerationError:n}:r)),new Error(n)}const t=d.find(n=>n.id===a);if(!t||!t.selectedImageForVideo)throw new Error("No image selected for video generation.");l(n=>n.map(e=>e.id===a?{...e,isGeneratingVideo:!0,videoGenerationError:null}:e));try{const n=await ya(t.selectedImageForVideo),e=`Voiceover: "${t.voiceoverScript}".

Motion: ${t.videoPrompt}

No Music Background`,{videoUrl:r,upscaledUrl:s,mediaGenerationId:c,seed:g}=await ca({provider:"lehuyducanh",prompt:e,imageUrl:n,upscale:t.shouldUpscaleVideo,aspectRatio:V}),f={url:r,mediaGenerationId:c,seed:g,upscaledUrl:s};l(v=>v.map(x=>{if(x.id!==a)return x;const _=[...x.videos||[],f];return{...x,videos:_,isGeneratingVideo:!1}})),k.logAction(b,"generateVideo"),P()}catch(n){throw n instanceof Error&&n.message.includes("daily limit")||l(e=>e.map(r=>r.id===a?{...r,isGeneratingVideo:!1,videoGenerationError:n instanceof Error?n.message:"Unknown error"}:r)),n}},[d,b,P,V]),qe=i.useCallback(()=>L(d.filter(a=>a.images.length===0).map(a=>()=>J(a.id)),5).finally(()=>je(!1)),[d,J]),Qe=i.useCallback(()=>{l(a=>a.map(t=>t.images.length>0?{...t,selectedImageForVideo:t.images[0]}:t)),alert("Picked the first available image for each scene as the video base!")},[]),Xe=i.useCallback(async()=>{ce(!0);const a=d.filter(t=>t.selectedImageForVideo&&(!t.videos||t.videos.length===0)).map(t=>()=>Q(t.id));await L(a,5),ce(!1)},[d,Q]),ea=i.useCallback(()=>L(d.flatMap(a=>(a.videos||[]).map((t,n)=>({scene:a,video:t,index:n})).filter(t=>t.video.url&&t.video.mediaGenerationId&&!t.video.upscaledUrl).map(t=>()=>q(t.scene.id,t.index))),5).finally(()=>Pe(!1)),[d,q]);i.useCallback(async()=>{},[d]),i.useCallback(async()=>{},[d]);const aa=i.useCallback(async()=>{const{botToken:a,chatId:t}=Se.getTelegramConfig();if(!a||!t){alert("Please configure Telegram settings first in the Settings page.");return}const n=d.flatMap((e,r)=>e.images.map((s,c)=>({type:"photo",url:s,caption:`Scene ${r+1}: ${e.voiceoverScript}`,fileName:`${String(r+1).padStart(3,"0")}_image_${String(c+1).padStart(2,"0")}.jpg`})));if(n.length===0){alert("No generated images found to send.");return}fe(!0),u(null);try{await be.sendMedia(n),alert("All images sent to Telegram successfully!")}catch(e){const r=e instanceof Error?e.message:"Failed to send images to Telegram.";u(r),alert(r)}finally{fe(!1)}},[d]),ta=i.useCallback(async()=>{const{botToken:a,chatId:t}=Se.getTelegramConfig();if(!a||!t){alert("Please configure Telegram settings first in the Settings page.");return}const n=d.flatMap((e,r)=>(e.videos||[]).map((s,c)=>({type:"video",url:s.upscaledUrl||s.url,caption:`Scene ${r+1}: ${e.voiceoverScript}`,fileName:`${String(r+1).padStart(3,"0")}_video_${String(c+1).padStart(2,"0")}.mp4`}))).filter(e=>e.url);if(n.length===0){alert("No videos found to send.");return}he(!0),u(null);try{await be.sendMedia(n),alert("All videos sent to Telegram successfully!")}catch(e){const r=e instanceof Error?e.message:"Failed to send videos to Telegram.";u(r),alert(r)}finally{he(!1)}},[d]),oa=C!=="input",na=i.useCallback(async()=>{if(C==="input"){alert("Please generate a script before saving.");return}ue(!0),u(null);try{const a=p?{name:p.name,data:await z(p)}:void 0,t=h?{name:h.name,data:await z(h)}:void 0,n=I?{name:I.name,data:await z(I)}:void 0,e={};for(const f in G){const v=G[f];e[f]={imageProvider:v.imageProvider},v.subjects&&(e[f].subjects=await Promise.all(v.subjects.map(async x=>({name:x.name,data:await z(x)}))))}const s=JSON.stringify({version:"1.2.0-supplements",productInfo:S,coreIdea:y,videoFormat:w,generationStep:C,voiceoverScript:A,scenes:d,productImage:a,modelImage:t,environmentImage:n,sceneOverrides:e,ttsVoice:N,videoAspectRatio:V},null,2),c=new Blob([s],{type:"application/json"}),g=(y.trim().replace(/\s+/g,"-").substring(0,20)||"supplements-project").toLowerCase();ma(c,`${g}.svdproj`)}catch(a){const t=a instanceof Error?a.message:"An unknown error occurred.";u(t),alert(`Failed to save project: ${t}`)}finally{ue(!1)}},[d,S,y,w,C,A,p,h,I,G,N,V]),ra=i.useCallback(async a=>{var n,e;const t=(n=a.target.files)==null?void 0:n[0];if(t){pe(!0),u(null);try{const r=await t.text(),s=JSON.parse(r);if(!((e=s.version)!=null&&e.includes("-supplements")))throw new Error("Invalid or incompatible project file for this module.");D(s.productInfo||""),T(s.coreIdea||""),R(s.videoFormat||"Benefit Showcase"),m(s.voiceoverScript||""),B(s.ttsVoice||"Kore"),$(s.videoAspectRatio||"9:16");const g=(s.scenes||[]).map(v=>({...xe({}),...v,videos:v.videos||[]}));l(g),F(s.generationStep||"input"),oe(s.productImage?await K(s.productImage.data,s.productImage.name):null),ne(s.modelImage?await K(s.modelImage.data,s.modelImage.name):null),re(s.environmentImage?await K(s.environmentImage.data,s.environmentImage.name):null);const f={};if(s.sceneOverrides)for(const v in s.sceneOverrides){const x=s.sceneOverrides[v],_={imageProvider:x.imageProvider};x.subjects&&(_.subjects=await Promise.all(x.subjects.map(ve=>K(ve.data,ve.name)))),f[v]=_}se(f),alert("Project imported successfully!")}catch(r){const s=r instanceof Error?r.message:"An unknown error occurred during import.";u(s),alert(`Failed to import project: ${s}`)}finally{pe(!1),a.target.value=""}}},[]),sa=a=>{window.confirm("Are you sure you want to delete this scene? This action cannot be undone.")&&l(t=>t.filter(n=>n.id!==a))};return o.jsxs(o.Fragment,{children:[o.jsxs("header",{className:"py-4 px-8 bg-gray-800 shadow-lg border-b border-gray-700 shrink-0 flex justify-between items-center flex-wrap gap-y-2",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-blue-400",children:[o.jsx("i",{className:"fas fa-pills mr-3"}),"Supplements Video Design"]}),o.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"AI-Powered Videos for Health & Wellness Products"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("label",{htmlFor:"import-project-supplements",className:`text-center bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-full transition-all duration-300 flex items-center justify-center gap-2 text-sm shadow-sm ${Z?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:Z?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fas fa-spinner fa-spin"}),"Importing..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fas fa-folder-open"}),"Import"]})}),o.jsx("input",{id:"import-project-supplements",type:"file",accept:".svdproj",className:"hidden",onChange:ra,disabled:Z}),o.jsx("button",{onClick:na,disabled:ge||!oa,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 flex items-center justify-center gap-2 text-sm shadow-sm",children:ge?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fas fa-spinner fa-spin"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fas fa-save"}),"Save"]})})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-right",children:[o.jsxs("span",{className:"text-gray-300 font-medium",children:["Welcome, ",o.jsx("span",{className:"font-bold text-blue-400",children:b}),"!"]}),o.jsxs("div",{className:"text-xs text-gray-400 bg-gray-700 px-2 py-1 rounded-md mt-1 flex gap-x-2",children:["Usage: ",o.jsxs("span",{title:"Storyboards",children:[o.jsx("i",{className:"fas fa-file-alt"})," ",H.storyboard,"/",E.generateStoryboard]})," |",o.jsxs("span",{title:"Images",children:[o.jsx("i",{className:"fas fa-image"})," ",H.image,"/",E.generateImage]})," |",o.jsxs("span",{title:"Videos",children:[o.jsx("i",{className:"fas fa-video"})," ",H.video,"/",E.generateVideo]})]})]}),o.jsx("button",{onClick:U,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full",children:"Logout"})]})]})]}),o.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-4 md:p-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 xl:grid-cols-4 gap-8 items-start",children:[o.jsx("div",{className:"lg:sticky lg:top-8 xl:col-span-1",children:o.jsx(Va,{productInfo:S,setProductInfo:D,coreIdea:y,setCoreIdea:T,onGenerateRandomIdea:Ue,isGeneratingRandomIdea:O,videoFormat:w,setVideoFormat:R,onGenerateScript:De,isGeneratingScript:ee,productImage:p,setProductImage:oe,modelImage:h,setModelImage:ne,environmentImage:I,setEnvironmentImage:re,ttsVoice:N,setTtsVoice:B,videoAspectRatio:V,setVideoAspectRatio:$})}),o.jsx("div",{className:"lg:col-span-2 xl:col-span-3",children:o.jsx(ga,{generationStep:C,scenes:d,isLoading:ee,isGeneratingPrompts:Ie,error:W,voiceoverScript:A,onVoiceoverScriptChange:m,onGeneratePrompts:Oe,sceneOverrides:G,onGenerateImage:J,onSceneImagePromptChange:Me,onSceneVideoPromptChange:Re,onSceneVoiceoverGuideChange:Be,onSceneEnhancementChange:$e,onSceneOverrideChange:Ze,onDeleteImage:_e,onViewImage:le,onUploadImageForVideo:Ye,onGenerateAllImages:qe,isBatchGenerating:ye,onViewStoryboard:()=>me(!0),onDownloadAllImages:()=>pa(d),isDownloadingImages:Ce,onDownloadAllVideos:()=>ua(d),isDownloadingVideos:Ae,onSelectImageForVideo:Le,onGenerateVideo:Q,onToggleVideoUpscale:ze,onUpscaleVideo:q,onGenerateAllVideos:Xe,isBatchGeneratingVideos:Ve,onUpscaleAllVideos:ea,isBatchUpscalingVideos:Ge,generatedEnvironments:[],onGenerateAudio:Y,onGenerateAllAudio:He,isBatchGeneratingAudio:we,activeModule:"supplements",onAddScene:We,onPickAllImages:Qe,onSendAllImagesToTelegram:aa,isSendingImagesToTelegram:ke,onSendAllVideosToTelegram:ta,isSendingVideosToTelegram:Fe,videoAspectRatio:V,onToggleDialogueInPrompt:Ke,onGenerateEnhancedPrompt:Te,onDeleteScene:sa,onSceneVoiceoverScriptChange:()=>alert("Script editing is not available in this context."),onDeleteVideo:Je})})]})}),ie&&o.jsx(Ia,{imageUrl:ie,onClose:()=>le(null)}),Ne&&o.jsx(fa,{scenes:d,onClose:()=>me(!1),videoAspectRatio:V})]})};export{Ta as default};
