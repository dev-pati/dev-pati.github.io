const g=a=>new Promise((t,s)=>{fetch(a).then(e=>{if(!e.ok)throw new Error(`Failed to fetch image for video generation: ${a} (status: ${e.status})`);return e.blob()}).then(e=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(r.result),r.onerror=d=>s(d)}).catch(e=>s(e))}),h=(a,t=1024)=>new Promise((s,e)=>{const r=new FileReader;r.readAsDataURL(a),r.onload=d=>{var i;if(!((i=d.target)!=null&&i.result))return e(new Error("Failed to read file."));const c=new Image;c.src=d.target.result,c.onload=()=>{const l=document.createElement("canvas");let{width:o,height:n}=c;o>n?o>t&&(n=Math.round(n*t/o),o=t):n>t&&(o=Math.round(o*t/n),n=t),l.width=o,l.height=n;const w=l.getContext("2d");if(!w)return e(new Error("Could not get canvas context"));w.drawImage(c,0,0,o,n),s(l.toDataURL("image/jpeg",.9))},c.onerror=l=>e(l)},r.onerror=d=>e(d)}),f=a=>new Promise((t,s)=>{const e=new FileReader;e.readAsDataURL(a),e.onload=()=>t(e.result),e.onerror=r=>s(r)}),u=async(a,t)=>{const e=await(await fetch(a)).blob();return new File([e],t,{type:e.type})};export{u as d,f,g as i,h as r};
