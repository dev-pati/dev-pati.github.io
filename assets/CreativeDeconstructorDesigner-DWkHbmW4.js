import{j as e,r as l,R as pe}from"./index-BLbhO8kS.js";import{e as he,r as be,a as fe,b as je,c as ye,d as ve,f as we}from"./adsService-SG8IcxOo.js";import{I as Ne}from"./lehuyducanhService-_rl_0G0R.js";import{f as F}from"./media-CDZXYBSY.js";import{s as ke}from"./settingsService-CbIZ9NBp.js";import{I as Ce}from"./ImageUpload-D540goV8.js";import"./streetInterviewPrompts-Dzu83YwK.js";const Ae=g=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...g,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),Pe=g=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...g,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})}),Se=g=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...g,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})}),Ie=g=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...g,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})}),De=({currentUser:g,onLogout:re})=>{const[x,b]=l.useState("analyze"),[c,P]=l.useState(null),[f,S]=l.useState(null),[j,I]=l.useState(null),[L,u]=l.useState([]),[$,i]=l.useState(null),[O,G]=l.useState(!1),[R,M]=l.useState(!1),[K,Z]=l.useState(!1),[q,V]=l.useState(!1),[W,y]=l.useState(!1),[E,H]=l.useState(""),[T,Y]=l.useState(""),[U,le]=l.useState("1:1"),[v,ne]=l.useState(""),[B,ie]=l.useState("gemini"),[w,J]=l.useState(null),[p,X]=l.useState(""),[z,oe]=l.useState("all"),[d,m]=l.useState(null),[h,N]=l.useState(""),[_,k]=l.useState(null),C=()=>ke.getGeminiApiKey()?!0:(i("Please set your Gemini API Key in the Settings module before generating content."),alert("Please set your Gemini API Key in the Settings module before generating content."),!1);l.useEffect(()=>{const t=s=>{var r;if(x==="analyze"&&!d){const a=(r=s.clipboardData)==null?void 0:r.items;if(!a)return;for(let n=0;n<a.length;n++)if(a[n].type.indexOf("image")!==-1){const o=a[n].getAsFile();if(o){P(o),S(URL.createObjectURL(o)),i(null),s.preventDefault();break}}}};return document.addEventListener("paste",t),()=>{document.removeEventListener("paste",t)}},[x,d]);const Q=t=>{var r,a;let s=null;"dataTransfer"in t?(t.preventDefault(),s=((r=t.dataTransfer.files)==null?void 0:r[0])||null):s=((a=t.target.files)==null?void 0:a[0])||null,s&&s.type.startsWith("image/")?(P(s),S(URL.createObjectURL(s)),i(null)):i("Please upload a valid image file.")},ce=async()=>{if(C()){if(!c){i("Please upload an image first.");return}G(!0),i(null),I(null);try{const t=await F(c),s=await we(t);I(s);const r=`Generate a high-quality, professional background for an advertisement.

**CRITICAL RULES:**
- The background MUST be simple and clean.
- It must contain ABSOLUTELY NO text, letters, or numbers. This is a very strict rule.
- It must contain ABSOLUTELY NO subjects, objects, or people.

Use the following description of an existing ad's background ONLY for inspiration for the color palette, lighting, and overall mood. Do NOT replicate any specific elements from the description.
---
Inspirational analysis: Mood and tone is '${s.tone}'. Lighting style is '${s.lighting}'. The original background is described as: '${s.background}'.`;H(r);const a=`Generate a high-resolution, photorealistic image of the main subject based on the following detailed description: "${s.mainSubject}".

**CRITICAL RULES:**
- **BACKGROUND:** The background is green screen. It MUST be a solid, uniform green color suitable for easy background removal.
- **NO TEXT:** The image MUST NOT contain any text, letters, or numbers. This is a very strict rule. Even if the original subject has branding or labels, generate a clean version without them.
- **COMPLETE SUBJECT:** If the description is of a person or a human body part, you MUST create a complete, well-proportioned person that accurately matches the description (pose, build, action).
- **OBJECT ONLY (if applicable):** If the description is of an object, create a high-quality, detailed image of that object. Do NOT add a person.
- The lighting on the subject must match this description: "${s.lighting}".
--style raw`;Y(a),b("generate")}catch(t){i(t instanceof Error?t.message:"An unknown error occurred during analysis.")}finally{G(!1)}}},D=async t=>{if(!C())return;const s={background:M,subject:Z,text:V,composite:y}[t];s(!0),i(null);try{let r=[],a="";if(t==="background")r=[await fe(B,E,U)],a=E;else if(t==="subject")r=[await je(B,T)],a=T;else if(t==="text"){if(!v)throw new Error("Landing page content cannot be empty.");r=await ye(v),a=`From landing page: ${v.substring(0,50)}...`}const n=r.map(o=>({id:crypto.randomUUID(),type:t,data:o,sourcePrompt:a}));u(o=>[...o,...n])}catch(r){i(r instanceof Error?r.message:`Failed to generate ${t}.`)}finally{s(!1)}},de=async()=>{if(C()){if(!c||!w||!p||!j){i("Please ensure an original ad, new product image, and key message are all provided.");return}y(!0),i(null);try{const t=await F(c),s=await F(w),r=await ve(t,s,p,j,U),a={id:crypto.randomUUID(),type:"composite",data:r,sourcePrompt:`Composite ad for "${p}"`};u(n=>[a,...n])}catch(t){i(t instanceof Error?t.message:"Failed to generate composite ad.")}finally{y(!1)}}},ee=async t=>{const s=L.find(r=>r.id===t);if(s){u(r=>r.map(a=>a.id===t?{...a,isProcessing:!0}:a));try{const a=`data:image/png;base64,${await be(s.data)}`;u(n=>n.map(o=>o.id===t?{...o,data:a,isProcessing:!1}:o))}catch(r){i(r instanceof Error?r.message:"Failed to remove background."),u(a=>a.map(n=>n.id===t?{...n,isProcessing:!1}:n))}}},ge=async()=>{if(!C()||!d||!h)return;const t=d.id;m(s=>s?{...s,isProcessing:!0}:null);try{const r=`data:image/png;base64,${await he(d.data,h)}`;u(a=>a.map(n=>n.id===t?{...n,data:r,sourcePrompt:`Edited with: "${h}"`}:n)),m(null),N("")}catch(s){i(s instanceof Error?s.message:"Failed to edit image."),m(r=>r?{...r,isProcessing:!1}:null)}},te=t=>{u(s=>s.filter(r=>r.id!==t))},se=t=>{const s=document.createElement("a");s.href=t.data,s.download=`${t.type}_${t.id.substring(0,6)}.${t.data.split("/")[1].split(";")[0]||"png"}`,document.body.appendChild(s),s.click(),document.body.removeChild(s)},xe=()=>{b("analyze"),P(null),S(null),I(null),u([]),i(null),G(!1),M(!1),Z(!1),V(!1),J(null),X(""),y(!1)},ae=L.filter(t=>z==="all"?!0:t.type===z),A=t=>{const s=L.filter(a=>a.type===t);if(s.length===0)return null;let r="grid-cols-2 sm:grid-cols-3 md:grid-cols-4";return(t==="text"||t==="composite")&&(r="grid-cols-1 md:grid-cols-2"),e.jsxs("div",{className:"mt-6 border-t border-gray-700 pt-6",children:[e.jsxs("h4",{className:"font-bold text-gray-300 text-xl mb-4 capitalize",children:[t,"s (",s.length,")"]}),e.jsx("div",{className:`grid gap-4 ${r}`,children:s.map(a=>e.jsxs("div",{className:"relative group bg-gray-900 rounded-lg overflow-hidden border border-gray-700 shadow-md",onClick:()=>a.type!=="text"&&k(a.data),children:[a.type==="text"?e.jsx("div",{className:"p-4 flex flex-col h-full aspect-square justify-center",children:e.jsxs("p",{className:"text-gray-200 text-lg flex-grow",children:['"',a.data,'"']})}):e.jsx("img",{src:a.data,alt:a.type,className:"w-full h-full object-cover aspect-square cursor-pointer"}),a.isProcessing&&e.jsxs("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center text-white text-lg",children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Processing..."]}),e.jsxs("div",{className:"absolute inset-0 bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center pointer-events-none",children:[e.jsx("div",{className:"flex flex-wrap gap-2 pointer-events-auto",onClick:n=>n.stopPropagation(),children:a.type!=="text"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>se(a),title:"Download",className:"w-12 h-12 bg-blue-600 hover:bg-blue-500 text-white rounded-full flex items-center justify-center text-xl",children:e.jsx("i",{className:"fas fa-download"})}),e.jsx("button",{onClick:()=>{N(""),m(a)},title:"Edit",className:"w-12 h-12 bg-purple-600 hover:bg-purple-500 text-white rounded-full flex items-center justify-center text-xl",children:e.jsx("i",{className:"fas fa-edit"})}),a.type==="subject"&&e.jsx("button",{onClick:()=>ee(a.id),title:"Remove Background",className:"w-12 h-12 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full flex items-center justify-center text-xl",children:e.jsx("i",{className:"fas fa-wand-magic-sparkles"})})]})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),te(a.id)},title:"Delete",className:"absolute top-2 right-2 w-8 h-8 bg-red-600 hover:bg-red-500 text-white rounded-full flex items-center justify-center text-lg font-bold pointer-events-auto",children:"×"})]})]},a.id))})]})},ue=()=>{switch(x){case"analyze":return e.jsxs("div",{className:"w-full max-w-3xl mx-auto",children:[e.jsxs("div",{onDragOver:t=>t.preventDefault(),onDrop:Q,className:"relative w-full p-6 border-2 border-dashed border-gray-600 rounded-lg hover:border-blue-500 transition-colors text-center cursor-pointer bg-gray-800",children:[e.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:Q,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),f?e.jsx("img",{src:f,alt:"Ad preview",className:"mx-auto max-h-96 rounded-md object-contain cursor-pointer",onClick:()=>k(f)}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(Ie,{className:"w-16 h-16 text-gray-500 mb-4"}),e.jsx("p",{className:"font-bold text-gray-300 text-2xl",children:"Drag & drop or paste an ad image here"}),e.jsx("p",{className:"text-lg text-gray-500",children:"or click to browse"})]})]}),f&&e.jsx("div",{className:"text-center mt-3 text-lg text-gray-400",children:e.jsxs("p",{children:[c==null?void 0:c.name," - ",(((c==null?void 0:c.size)||0)/1024).toFixed(2)," KB"]})}),e.jsx("button",{onClick:ce,disabled:!c||O,className:"mt-8 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-4 rounded-full disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 flex items-center justify-center gap-2 text-2xl",children:O?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),"Analyzing..."]}):e.jsx(e.Fragment,{children:"Analyze Image"})})]});case"generate":return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8 items-start",children:[j&&e.jsxs("div",{className:"lg:col-span-1 lg:sticky lg:top-8 bg-gray-800 p-6 rounded-xl border border-gray-700",children:[e.jsx("h3",{className:"text-2xl font-bold text-blue-400 mb-4 border-b border-gray-600 pb-2",children:"Analysis Results"}),e.jsx("div",{className:"space-y-4 text-lg",children:Object.entries(j).map(([t,s])=>e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-300 capitalize",children:t.replace(/([A-Z])/g," $1")}),e.jsx("p",{className:"text-gray-400 pl-2 text-base",children:s})]},t))})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-8",children:[e.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700 space-y-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-green-400",children:"1. Generate Backgrounds"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xl font-bold text-gray-300 mb-2",children:"Background Prompt"}),e.jsx("textarea",{value:E,onChange:t=>H(t.target.value),rows:5,className:"w-full bg-gray-700 border-2 border-gray-600 rounded-lg p-3 text-gray-200 focus:ring-2 focus:ring-green-500 text-lg"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between mt-3 gap-4",children:[e.jsx("div",{className:"flex gap-2 bg-gray-900 border border-gray-600 rounded-lg p-1",children:["1:1","9:16","16:9"].map(t=>e.jsx("button",{onClick:()=>le(t),className:`px-4 py-2 rounded text-lg font-semibold ${U===t?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:t},t))}),e.jsx("button",{onClick:()=>D("background"),disabled:R,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-full disabled:opacity-50 text-xl flex items-center gap-2",children:R?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),"Generating..."]}):"Generate"})]}),A("background")]})]}),e.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700 space-y-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-green-400",children:"2. Generate Subjects"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xl font-bold text-gray-300 mb-2",children:"Subject Prompt"}),e.jsx("textarea",{value:T,onChange:t=>Y(t.target.value),rows:5,className:"w-full bg-gray-700 border-2 border-gray-600 rounded-lg p-3 text-gray-200 focus:ring-2 focus:ring-green-500 text-lg"}),e.jsx("div",{className:"text-right mt-3",children:e.jsx("button",{onClick:()=>D("subject"),disabled:K,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-full disabled:opacity-50 text-xl flex items-center gap-2 ml-auto",children:K?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),"Generating..."]}):"Generate"})}),A("subject")]})]}),e.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700 space-y-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-green-400",children:"3. Generate Ad Copy"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xl font-bold text-gray-300 mb-2",children:"Ad Copy from Landing Page"}),e.jsx("textarea",{value:v,onChange:t=>ne(t.target.value),rows:6,placeholder:"Paste landing page text content here...",className:"w-full bg-gray-700 border-2 border-gray-600 rounded-lg p-3 text-gray-200 focus:ring-2 focus:ring-green-500 text-lg"}),e.jsx("div",{className:"text-right mt-3",children:e.jsx("button",{onClick:()=>D("text"),disabled:q,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-full disabled:opacity-50 text-xl flex items-center gap-2 ml-auto",children:q?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),"Generating..."]}):"Generate"})}),A("text")]})]}),e.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700 space-y-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-purple-400",children:"4. Generate Composite Ad"}),e.jsx("p",{className:"text-gray-400",children:"Combine the analyzed style with your new product and message to create a final ad design."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Ce,{id:"new-product-image",label:"New Product Image",file:w,onFileChange:J}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-md font-bold text-blue-400 mb-2",children:"New Key Message"}),e.jsx("textarea",{value:p,onChange:t=>X(t.target.value),rows:5,className:"w-full h-40 bg-gray-700 border-2 border-gray-600 rounded-lg p-3 text-gray-200 focus:ring-2 focus:ring-purple-500 text-lg",placeholder:"e.g., Unlock Your Potential"})]})]}),e.jsx("div",{className:"text-right mt-3",children:e.jsx("button",{onClick:de,disabled:W||!w||!p||!c,className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-full disabled:opacity-50 text-xl flex items-center gap-2 ml-auto",children:W?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),"Synthesizing..."]}):"Generate Composite"})}),A("composite")]}),e.jsx("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700 space-y-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-400",children:"Global Settings"}),e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("label",{htmlFor:"provider-select-ads",className:"block text-lg font-bold text-gray-300 mb-1 text-right",children:"Image Provider"}),e.jsxs("select",{id:"provider-select-ads",value:B,onChange:t=>ie(t.target.value),className:"bg-gray-700 border border-gray-600 rounded-md p-2 text-gray-200 text-lg focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"gemini",children:"Gemini API"}),e.jsx("option",{value:"lehuyducanh",children:"LeHuyDucAnh API"})]})]})]})})]})]});case"synthesize":return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-center mb-8",children:[e.jsx("span",{className:"font-bold text-gray-300 text-2xl",children:"Filter:"}),["all","background","subject","text","composite"].map(t=>e.jsx("button",{onClick:()=>oe(t),className:`px-6 py-3 rounded-full text-xl font-semibold capitalize ${z===t?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:t},t))]}),ae.length===0?e.jsxs("div",{className:"text-center py-20 bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-2xl text-gray-500",children:"No assets generated yet."}),e.jsx("button",{onClick:()=>b("generate"),className:"mt-4 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-full text-xl",children:"Go to Generate"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:ae.map(t=>e.jsxs("div",{className:`relative group bg-gray-900 rounded-lg overflow-hidden border border-gray-700 shadow-md ${t.type==="composite"?"col-span-2 row-span-2":""}`,onClick:()=>t.type!=="text"&&k(t.data),children:[t.type==="text"?e.jsx("div",{className:"p-4 flex flex-col h-full aspect-square justify-center",children:e.jsxs("p",{className:"text-gray-200 text-lg flex-grow",children:['"',t.data,'"']})}):e.jsx("img",{src:t.data,alt:t.type,className:"w-full h-full object-cover aspect-square cursor-pointer"}),t.isProcessing&&e.jsxs("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center text-white text-lg",children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Processing..."]}),e.jsxs("div",{className:"absolute inset-0 bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center pointer-events-none",children:[e.jsx("div",{className:"flex flex-wrap gap-2 pointer-events-auto",onClick:s=>s.stopPropagation(),children:t.type==="text"?e.jsx("button",{onClick:()=>navigator.clipboard.writeText(t.data),title:"Copy",className:"w-12 h-12 bg-gray-600 hover:bg-gray-500 text-white rounded-full flex items-center justify-center text-xl",children:e.jsx("i",{className:"fas fa-copy"})}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>se(t),title:"Download",className:"w-12 h-12 bg-blue-600 hover:bg-blue-500 text-white rounded-full flex items-center justify-center text-xl",children:e.jsx("i",{className:"fas fa-download"})}),e.jsx("button",{onClick:()=>{N(""),m(t)},title:"Edit",className:"w-12 h-12 bg-purple-600 hover:bg-purple-500 text-white rounded-full flex items-center justify-center text-xl",children:e.jsx("i",{className:"fas fa-edit"})}),t.type==="subject"&&e.jsx("button",{onClick:()=>ee(t.id),title:"Remove Background",className:"w-12 h-12 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full flex items-center justify-center text-xl",children:e.jsx("i",{className:"fas fa-wand-magic-sparkles"})})]})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),te(t.id)},title:"Delete",className:"absolute top-2 right-2 w-8 h-8 bg-red-600 hover:bg-red-500 text-white rounded-full flex items-center justify-center text-lg font-bold pointer-events-auto",children:"×"})]})]},t.id))})]})}},me={analyze:{icon:e.jsx(Ae,{className:"w-8 h-8"}),title:"Analyze Ad Creative"},generate:{icon:e.jsx(Pe,{className:"w-8 h-8"}),title:"Generate Assets"},synthesize:{icon:e.jsx(Se,{className:"w-8 h-8"}),title:"Synthesize & Export"}};return e.jsxs("div",{className:"flex flex-col h-full bg-gray-900",children:[e.jsxs("header",{className:"py-4 px-8 bg-gray-800 shadow-md border-b border-gray-700 shrink-0 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-blue-400",children:[e.jsx("i",{className:"fas fa-lightbulb mr-3"}),"AI Ads Deconstructor"]}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Deconstruct and recreate winning ad creatives."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:xe,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-full transition-all duration-300 flex items-center justify-center gap-2 text-sm shadow-sm",children:[e.jsx("i",{className:"fas fa-sync-alt"}),"Start Over"]}),e.jsx("button",{onClick:re,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full",children:"Logout"})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-center mb-12",children:Object.entries(me).map(([t,s],r)=>e.jsxs(pe.Fragment,{children:[r>0&&e.jsx("div",{className:`flex-1 h-1 w-16 md:w-32 ${x===t||x==="generate"&&t==="analyze"||x==="synthesize"&&(t==="analyze"||t==="generate")?"bg-blue-500":"bg-gray-600"}`}),e.jsxs("div",{className:`flex flex-col items-center gap-2 cursor-pointer transition-colors ${x===t?"text-blue-400":"text-gray-500 hover:text-gray-300"}`,onClick:()=>b(t),children:[e.jsx("div",{className:`w-16 h-16 rounded-full border-4 flex items-center justify-center ${x===t?"bg-blue-900/50 border-blue-500":"bg-gray-700 border-gray-600"}`,children:s.icon}),e.jsxs("p",{className:"font-bold text-base md:text-xl text-center",children:[r+1,". ",s.title]})]})]},t))}),$&&e.jsxs("div",{className:"bg-red-900/50 p-4 rounded-xl border border-red-600 shadow-lg mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-red-300",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),"An Error Occurred"]}),e.jsx("button",{onClick:()=>i(null),className:"text-red-300 hover:text-white font-bold text-2xl",children:"×"})]}),e.jsx("p",{className:"text-red-200 bg-red-900/70 p-3 mt-2 rounded-md font-mono text-base break-words",children:$})]}),ue()]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-40 flex items-center justify-center p-4",onClick:()=>m(null),children:e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6 w-full max-w-4xl flex gap-6",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("h3",{className:"text-2xl font-bold text-purple-400 mb-4",children:"Edit Image"}),e.jsx("img",{src:d.data,alt:"Editing asset",className:"w-full h-auto object-contain rounded-md aspect-square"})]}),e.jsxs("div",{className:"w-1/2 flex flex-col",children:[e.jsx("label",{htmlFor:"edit-prompt",className:"text-xl font-bold text-gray-300 mb-2",children:"Edit Prompt"}),e.jsx("textarea",{id:"edit-prompt",value:h,onChange:t=>N(t.target.value),placeholder:"e.g., Change the background to a beach",className:"w-full bg-gray-700 border-2 border-gray-600 rounded-lg p-3 text-gray-200 focus:ring-2 focus:ring-purple-500 text-lg flex-grow",rows:8}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx("button",{onClick:()=>m(null),className:"w-full bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-4 rounded-full text-xl",children:"Cancel"}),e.jsx("button",{onClick:ge,disabled:d.isProcessing||!h,className:"w-full bg-purple-600 hover:bg-purple-500 text-white font-bold py-3 px-4 rounded-full disabled:opacity-50 text-xl flex items-center justify-center gap-2",children:d.isProcessing?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),"Applying..."]}):"Apply Edit"})]})]})]})}),_&&e.jsx(Ne,{imageUrl:_,onClose:()=>k(null)})]})};export{De as default};
